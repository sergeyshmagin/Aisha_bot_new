# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–∞: –ø–æ–ª–µ is_draft

## üêõ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
null value in column "is_draft" of relation "avatars" violates not-null constraint
```

## üîç –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–æ–¥–µ–ª–∏ –∏ –ë–î**: –ü–æ–ª–µ `is_draft` –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ –∏–∑ –º–æ–¥–µ–ª–∏ SQLAlchemy –≤ —Ä–∞–º–∫–∞—Ö —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ Legacy –∫–æ–¥–∞
2. **–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞**: –ú–∏–≥—Ä–∞—Ü–∏—è `e3da12f2e9cc` –∫–æ—Ç–æ—Ä–∞—è —É–¥–∞–ª—è–µ—Ç –ø–æ–ª–µ `is_draft` –∏–∑ –ë–î –Ω–µ –±—ã–ª–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç**: SQLAlchemy –ø—ã—Ç–∞–µ—Ç—Å—è –≤—Å—Ç–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –±–µ–∑ –ø–æ–ª—è `is_draft`, –Ω–æ –ë–î —Ç—Ä–µ–±—É–µ—Ç –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ

## ‚úÖ –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–ª–µ `is_draft` –≤ –º–æ–¥–µ–ª—å `Avatar` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:

```python
# –í–†–ï–ú–ï–ù–ù–û–ï –ü–û–õ–ï –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –ë–î (–ø–æ–∫–∞ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è)
is_draft: Mapped[bool] = mapped_column(Boolean, default=True)  # TODO: –£–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ e3da12f2e9cc
```

## üîß –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é Alembic:

```bash
python -m alembic upgrade head
```

–ú–∏–≥—Ä–∞—Ü–∏—è `e3da12f2e9cc` —É–¥–∞–ª–∏—Ç –ø–æ–ª–µ `is_draft` –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `avatars`, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–ª–µ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —É–¥–∞–ª–∏—Ç—å –∏–∑ –º–æ–¥–µ–ª–∏.

## üìã –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã

- `app/database/models.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø–æ–ª–µ `is_draft`

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç** –±–µ–∑ –æ—à–∏–±–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** –º–µ–∂–¥—É –º–æ–¥–µ–ª—å—é SQLAlchemy –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ë–î
- ‚ö†Ô∏è **–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ** - —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∞–≤–∞—Ç–∞—Ä —á–µ—Ä–µ–∑ –±–æ—Ç–∞
2. ‚úÖ –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–∫–∏ `is_draft` constraint
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∞–≤–∞—Ç–∞—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
4. ‚úÖ –í—Å–µ –ø–æ–ª—è –¥–æ–ª–∂–Ω—ã –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---
**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 27.05.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π (–ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è) 