# –§–∏–Ω–∞–ª—å–Ω—ã–π –∞—É–¥–∏—Ç: avatar_fsm.py

## 1. –°—Ç–∏–ª—å (PEP8)

- –ú–Ω–æ–≥–æ —Å—Ç—Ä–æ–∫ –ø—Ä–µ–≤—ã—à–∞—é—Ç 79 —Å–∏–º–≤–æ–ª–æ–≤ (–æ—Å–æ–±–µ–Ω–Ω–æ f-—Å—Ç—Ä–æ–∫–∏, –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä, —Å–æ–æ–±—â–µ–Ω–∏—è).
- –ù–µ –≤–µ–∑–¥–µ —Å–æ–±–ª—é–¥–µ–Ω—ã –¥–≤–∞ –ø—É—Å—Ç—ã—Ö —Ä—è–¥–∞ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏.
- –í—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —Å—Ç—Ä–æ–∫–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö).
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏–º–µ—é—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø –∏–ª–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç PEP8.
- –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª–∏–Ω–Ω—ã–µ —Ü–µ–ø–æ—á–∫–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –±–µ–∑ —Ä–∞–∑–±–∏–≤–∫–∏ –Ω–∞ —Å—Ç—Ä–æ–∫–∏.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –†–∞–∑–±–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª–∏–Ω–Ω–µ–µ 79 —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ (–æ—Å–æ–±–µ–Ω–Ω–æ f-—Å—Ç—Ä–æ–∫–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π, —Å–æ–æ–±—â–µ–Ω–∏—è).
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ –¥–≤–∞ –ø—É—Å—Ç—ã—Ö —Ä—è–¥–∞ –º–µ–∂–¥—É –≤—Å–µ–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏.
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∏ —É–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ/—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.
- –î–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫–æ–±–∫–∏ –∏ –ø–µ—Ä–µ–Ω–æ—Å—ã.

## 2. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

- –í–∞–ª–∏–¥–∞—Ü–∏—è user_id, avatar_id, –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ callback data –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤–æ –º–Ω–æ–≥–∏—Ö —Ö–µ–Ω–¥–ª–µ—Ä–∞—Ö.
- –ü–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è —à–∞–±–ª–æ–Ω—ã –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–± –æ—à–∏–±–∫–∞—Ö ("–û—à–∏–±–∫–∞: –Ω–µ –Ω–∞–π–¥–µ–Ω –∞–≤–∞—Ç–∞—Ä –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.", "–û—à–∏–±–∫–∞: –∏–Ω–¥–µ–∫—Å —Ñ–æ—Ç–æ –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞." –∏ –¥—Ä.).
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä –∏ caption –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏ –≤—ã–Ω–µ—Å–µ–Ω–æ, –Ω–æ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫ –¥—Ä—É–≥–∏–º —á–∞—Å—Ç—è–º FSM.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –í—ã–Ω–µ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ user_id, avatar_id, –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ callback data –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é-–≤–∞–ª–∏–¥–∞—Ç–æ—Ä.
- –í—ã–Ω–µ—Å—Ç–∏ —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å.
- –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é: –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ FSM –≤—ã–Ω–µ—Å—Ç–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–ª–∞–≤–∏–∞—Ç—É—Ä –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

## 3. –û–±—â–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Ñ—É–Ω–∫—Ü–∏–π —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å docstring –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ ‚Äî —ç—Ç–æ –ø–ª—é—Å.
- –õ–æ–≥–∏–∫–∞ —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º–æ–π, –Ω–æ —Ñ–∞–π–ª –≤—Å—ë –µ—â—ë –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π (1000+ —Å—Ç—Ä–æ–∫) ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–∞–ª—å–Ω–µ–π—à–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –ø–æ –∑–æ–Ω–∞–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, FSM, –≥–∞–ª–µ—Ä–µ—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ, —É—Ç–∏–ª–∏—Ç—ã).
- –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, progressbar –≤ notify_progress).

**–ò—Ç–æ–≥:**
–§–∞–π–ª —Å—Ç–∞–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —á–∏—â–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ, –Ω–æ –¥–ª—è production-—É—Ä–æ–≤–Ω—è —Ç—Ä–µ–±—É–µ—Ç—Å—è:
- –î–æ–≤–µ—Å—Ç–∏ —Å—Ç–∏–ª—å –¥–æ –ø–æ–ª–Ω–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è PEP8.
- –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã/—É—Ç–∏–ª–∏—Ç—ã.
- –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é –Ω–∞ –º–æ–¥—É–ª–∏.
- –í—ã–Ω–µ—Å—Ç–∏ —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã.

---

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
–í–Ω–µ–¥—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∏–ª—è (flake8, black) –∏ –ø–æ–∫—Ä—ã—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ unit-—Ç–µ—Å—Ç–∞–º–∏.

# –ê—É–¥–∏—Ç –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É: frontend_bot/handlers

## 1. –°—Ç–∏–ª—å –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (PEP8, —á–∏—Ç–∞–µ–º–æ—Å—Ç—å)
- –í—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (f-—Å—Ç—Ä–æ–∫–∏, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–π, —Å–æ–æ–±—â–µ–Ω–∏—è).
- –ù–µ –≤—Å–µ–≥–¥–∞ —Å–æ–±–ª—é–¥–µ–Ω—ã –¥–≤–∞ –ø—É—Å—Ç—ã—Ö —Ä—è–¥–∞ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏.
- –ï—Å—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç —É–¥–∞–ª–∏—Ç—å.
- –í—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã.
- –ù–µ –≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–µ—é—Ç docstring –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤.
- –í avatar_fsm.py –∏ transcribe.py –µ—Å—Ç—å –∫—Ä—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç –¥–µ–∫–æ–º–ø–æ–∑–∏—Ä–æ–≤–∞—Ç—å.

## 2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –∏ –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã
- –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –Ω–æ–≤—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è async/await.
- –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –≤—Å—ë –µ—â—ë –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–æ–≤ (with open(...)), —á—Ç–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç event loop.
- –í avatar_fsm.py –∏ transcribe.py —É–∂–µ –Ω–∞—á–∞—Ç–∞ –∑–∞–º–µ–Ω–∞ –Ω–∞ aiofiles, –Ω–æ –Ω–µ –≤–µ–∑–¥–µ.
- –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞—Ä–∏ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π –∏ –±—É—Ñ–µ—Ä–æ–≤ ‚Äî —ç—Ç–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω–æ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞.

## 3. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –í avatar_fsm.py, photo_tools.py, avatar/photo_upload.py –∏ avatar/gallery.py –µ—Å—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–æ—Ç–æ, –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞–º–∏, –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞–º–∏.
- –í—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –ø–æ—Ö–æ–∂–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –æ–±–æ–±—â–∏—Ç—å —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –∏–ª–∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.
- –í avatar_fsm.py –∏ avatar/photo_upload.py –µ—Å—Ç—å –ø–æ—Ö–æ–∂–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–∏–Ω–æ—á–Ω—ã—Ö —Ñ–æ—Ç–æ –∏ media group.

## 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Ñ—É–Ω–∫—Ü–∏–π –µ—Å—Ç—å try/except –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫.
- –ù–µ –≤—Å–µ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.
- –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, user_id, avatar_id, –∏–Ω–¥–µ–∫—Å—ã).
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π –∏ –±—É—Ñ–µ—Ä–æ–≤ ‚Äî –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ race condition.

## 5. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- –ù–∞—á–∞—Ç–∞ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∫—Ä—É–ø–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ –º–æ–¥—É–ª–∏ (avatar_fsm ‚Üí avatar/photo_upload.py, avatar/gallery.py, avatar/confirm.py –∏ —Ç.–¥.).
- –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö (–æ—Å–æ–±–µ–Ω–Ω–æ –≤ avatar_fsm.py) –≤—Å—ë –µ—â—ë —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–≥–∏–∫–∏ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ.
- –ï—Å—Ç—å –∑–∞–¥–µ–ª –Ω–∞ —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (services/), –Ω–æ –Ω–µ –≤—Å–µ –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏–∏ —Ç—É–¥–∞ –≤—ã–Ω–µ—Å–µ–Ω—ã.

---

# üõ† –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É (handlers)

1. **–°—Ç–∏–ª—å –∏ PEP8**
   - –†–∞–∑–±–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª–∏–Ω–Ω–µ–µ 79 —Å–∏–º–≤–æ–ª–æ–≤.
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ –¥–≤–∞ –ø—É—Å—Ç—ã—Ö —Ä—è–¥–∞ –º–µ–∂–¥—É –≤—Å–µ–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏.
   - –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥.
   - –î–æ–±–∞–≤–∏—Ç—å docstring –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –∫–æ –≤—Å–µ–º –ø—É–±–ª–∏—á–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º.

2. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**
   - –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏ –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ (aiofiles).
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –≤—ã–∑–æ–≤–æ–≤ (open, time.sleep, requests –∏ —Ç.–¥.).
   - –í—ã–Ω–µ—Å—Ç–∏ —Ç—è–∂—ë–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ffmpeg) –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—á–µ—Ä–µ–¥–∏.

3. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –í—ã–Ω–µ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞, –∫–ª–∞–≤–∏–∞—Ç—É—Ä, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫) –≤ utils –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã.
   - –û–±–æ–±—â–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –∏–ª–∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –í–µ–∑–¥–µ, –≥–¥–µ –µ—Å—Ç—å try/except, –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (user_id, avatar_id, –∏–Ω–¥–µ–∫—Å—ã) –≤–æ –≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã.

5. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
   - –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é avatar_fsm.py: –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ avatar/photo_upload.py, avatar/gallery.py, avatar/confirm.py –∏ —Ç.–¥.
   - –í—ã–Ω–µ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏–∑ —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ –≤ —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (services/).
   - –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π –∏ –±—É—Ñ–µ—Ä–æ–≤ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Redis), –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ–∫–∞ –Ω–µ –≤–Ω–µ–¥—Ä—è—Ç—å.

6. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –û–ø–∏—Å–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É FSM –∏ –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º README –∏–ª–∏ docstring –≤ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ.
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —Å—Ö–µ–º—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π. 