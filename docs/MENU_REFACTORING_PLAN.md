# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –º–µ–Ω—é –±–æ—Ç–∞

## üéØ –¶–µ–ª—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

–†–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–µ–Ω—é —Å–æ–≥–ª–∞—Å–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ö–µ–º–µ User Flow —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞:
- **üé® –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ** - –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **üé≠ –ú–æ–∏ —Ä–∞–±–æ—Ç—ã** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- **ü§ñ –ë–∏–∑–Ω–µ—Å-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç** - —Ä–∞–±–æ—á–∏–µ –∑–∞–¥–∞—á–∏
- **üí≥ –ë–∞–ª–∞–Ω—Å** - —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- **‚ÑπÔ∏è –ü–æ–º–æ—â—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –æ–±—É—á–µ–Ω–∏–µ

## üìã –ü—Ä–∞–≤–∏–ª–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
1. **DRY** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ –º–µ—Ç–æ–¥—ã
2. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π —Ä–∞–∑–¥–µ–ª –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –º–æ–¥—É–ª–µ
3. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–µ callback_data –ø–æ–º–µ—á–∞–µ–º –∫–∞–∫ LEGACY
4. **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ** - –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### üìù –ü—Ä–∞–≤–∏–ª–∞ –∫–æ–¥–∞:
1. **LEGACY –∫–æ–¥** - –∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ–º –∫–∞–∫ `# LEGACY: —Å—Ç–∞—Ä–æ–µ –º–µ–Ω—é, —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è`
2. **–ú–∞–∫—Å–∏–º—É–º 500 —Å—Ç—Ä–æ–∫** –Ω–∞ —Ñ–∞–π–ª - —Ä–∞–∑–±–∏–≤–∞–µ–º –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã
3. **–¢–µ—Å—Ç—ã** - –ø–æ–∫—Ä—ã–≤–∞–µ–º –Ω–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–µ—Å—Ç–∞–º–∏
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –æ–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

## üóÇÔ∏è –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∞–Ω–∞–ª–∏–∑)

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ callback_data:
```python
# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
"main_menu"                    # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
"ai_creativity_menu"           # üîÑ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤ "creativity_menu"
"business_menu"                # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
"profile_menu"                 # üîÑ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –≤ "settings_menu"

# –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ
"images_menu"                  # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
"video_menu"                   # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
"avatar_generation_menu"       # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
"imagen4_generation"           # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

# –ú–æ–∏ —Ä–∞–±–æ—Ç—ã
"my_projects_menu"             # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
"gallery_all"                  # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
"gallery_avatars"              # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
"gallery_imagen"               # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
"gallery_video"                # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

# –ë–∏–∑–Ω–µ—Å
"tasks_menu"                   # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
"news_menu"                    # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
"transcribe_menu"              # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
"add_to_chat"                  # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
```

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
```python
# app/handlers/main_menu.py - 1251 —Å—Ç—Ä–æ–∫–∞ (–¢–†–ï–ë–£–ï–¢ –†–ê–ó–ë–ò–í–ö–ò)
# app/keyboards/main.py - 433 —Å—Ç—Ä–æ–∫–∏ (–ù–û–†–ú–ê)
# app/handlers/generation/ - –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úÖ
# app/handlers/avatar/ - –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úÖ
# app/handlers/gallery/ - –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úÖ
```

## üöÄ –≠—Ç–∞–ø—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

### üì¶ –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (1-2 —á–∞—Å–∞)

#### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
```bash
app/handlers/menu/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ main_handler.py          # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îú‚îÄ‚îÄ creativity_handler.py    # –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ
‚îú‚îÄ‚îÄ projects_handler.py      # –ú–æ–∏ —Ä–∞–±–æ—Ç—ã  
‚îú‚îÄ‚îÄ business_handler.py      # –ë–∏–∑–Ω–µ—Å-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
‚îú‚îÄ‚îÄ balance_handler.py       # –ë–∞–ª–∞–Ω—Å
‚îú‚îÄ‚îÄ settings_handler.py      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îî‚îÄ‚îÄ help_handler.py          # –ü–æ–º–æ—â—å
```

#### 1.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä
```python
# app/keyboards/menu/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ main.py                  # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
‚îú‚îÄ‚îÄ creativity.py            # –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ
‚îú‚îÄ‚îÄ projects.py              # –ú–æ–∏ —Ä–∞–±–æ—Ç—ã
‚îú‚îÄ‚îÄ business.py              # –ë–∏–∑–Ω–µ—Å
‚îú‚îÄ‚îÄ balance.py               # –ë–∞–ª–∞–Ω—Å
‚îú‚îÄ‚îÄ settings.py              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îî‚îÄ‚îÄ help.py                  # –ü–æ–º–æ—â—å
```

### üìù –≠—Ç–∞–ø 2: –ú–∏–≥—Ä–∞—Ü–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é (2-3 —á–∞—Å–∞)

#### 2.1 –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
```python
# –ù–û–í–ê–Ø –°–¢–†–£–ö–¢–£–†–ê
def get_main_menu_v2() -> InlineKeyboardMarkup:
    return InlineKeyboardMarkup(inline_keyboard=[
        [
            InlineKeyboardButton(text="üé® –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ", callback_data="creativity_menu"),
            InlineKeyboardButton(text="üé≠ –ú–æ–∏ —Ä–∞–±–æ—Ç—ã", callback_data="projects_menu")
        ],
        [
            InlineKeyboardButton(text="ü§ñ –ë–∏–∑–Ω–µ—Å-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç", callback_data="business_menu"),
            InlineKeyboardButton(text="üí≥ –ë–∞–ª–∞–Ω—Å", callback_data="balance_menu")
        ],
        [
            InlineKeyboardButton(text="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏", callback_data="settings_menu"),
            InlineKeyboardButton(text="‚ÑπÔ∏è –ü–æ–º–æ—â—å", callback_data="help_menu")
        ]
    ])

# LEGACY - —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
def get_main_menu() -> InlineKeyboardMarkup:
    # LEGACY: —Å—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é
    pass
```

#### 2.2 –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ä—ã—Ö callback_data
```python
# app/handlers/menu/legacy_mapper.py
LEGACY_CALLBACK_MAPPING = {
    "ai_creativity_menu": "creativity_menu",
    "profile_menu": "settings_menu",
    "my_projects_menu": "projects_menu",
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–∞–ø–ø–∏–Ω–≥–∏
}
```

### üé® –≠—Ç–∞–ø 3: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ (2-3 —á–∞—Å–∞)

#### 3.1 –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞
```python
# app/handlers/menu/creativity_handler.py
class CreativityHandler:
    async def show_creativity_menu(self, call: CallbackQuery, state: FSMContext):
        """üé® –ú–µ–Ω—é —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞"""
        
    async def show_photo_menu(self, call: CallbackQuery, state: FSMContext):
        """üì∑ –ú–µ–Ω—é —Ñ–æ—Ç–æ"""
        
    async def show_video_menu(self, call: CallbackQuery, state: FSMContext):
        """üé¨ –ú–µ–Ω—é –≤–∏–¥–µ–æ"""
```

#### 3.2 –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
```python
# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
# - app/handlers/generation/ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
# - app/handlers/avatar/ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–æ–≤
# - app/handlers/imagen4/ –¥–ª—è Imagen4
```

### üé≠ –≠—Ç–∞–ø 4: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ "–ú–æ–∏ —Ä–∞–±–æ—Ç—ã" (1-2 —á–∞—Å–∞)

#### 4.1 –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤
```python
# app/handlers/menu/projects_handler.py
class ProjectsHandler:
    async def show_projects_menu(self, call: CallbackQuery, state: FSMContext):
        """üé≠ –ú–æ–∏ —Ä–∞–±–æ—Ç—ã - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞"""
        
    async def show_all_photos(self, call: CallbackQuery, state: FSMContext):
        """üñºÔ∏è –í—Å–µ —Ñ–æ—Ç–æ"""
        
    async def show_all_videos(self, call: CallbackQuery, state: FSMContext):
        """üé¨ –í—Å–µ –≤–∏–¥–µ–æ"""
```

#### 4.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–∞–ª–µ—Ä–µ–µ–π
```python
# –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º:
# - app/handlers/gallery/ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
# - app/handlers/gallery/viewer/ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
# - app/handlers/gallery/management/ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```

### ü§ñ –≠—Ç–∞–ø 5: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏–π (2-3 —á–∞—Å–∞)

#### 5.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–º–µ–Ω—é
```python
# app/handlers/menu/business_handler.py
class BusinessHandler:
    async def show_business_menu(self, call: CallbackQuery, state: FSMContext):
        """ü§ñ –ë–∏–∑–Ω–µ—Å-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç"""
        
    async def show_tasks_section(self, call: CallbackQuery, state: FSMContext):
        """üìã –†–∞–∑–¥–µ–ª –∑–∞–¥–∞—á"""
        
    async def show_news_section(self, call: CallbackQuery, state: FSMContext):
        """üì∞ –†–∞–∑–¥–µ–ª –Ω–æ–≤–æ—Å—Ç–µ–π"""
        
    async def show_transcription_section(self, call: CallbackQuery, state: FSMContext):
        """üìù –†–∞–∑–¥–µ–ª —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏"""
        
    async def show_chats_section(self, call: CallbackQuery, state: FSMContext):
        """üë• –†–∞–∑–¥–µ–ª —á–∞—Ç–æ–≤"""
```

### üí≥ –≠—Ç–∞–ø 6: –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ –±–∞–ª–∞–Ω—Å–∞ (1-2 —á–∞—Å–∞) ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

#### 6.1 –ù–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –±–∞–ª–∞–Ω—Å–∞ ‚úÖ
```python
# app/handlers/menu/balance_handler.py
class BalanceMenuHandler:  # ‚úÖ –°–û–ó–î–ê–ù
    async def show_balance_menu(self, call: CallbackQuery, state: FSMContext):
        """üí≥ –ú–µ–Ω—é –±–∞–ª–∞–Ω—Å–∞ - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç profile —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª"""
        
    # –ü–ï–†–ï–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û –§–£–ù–ö–¶–ò–û–ù–ê–õ–ê:
    # - profile_balance_info ‚Üí –ü—Ä–æ—Å–º–æ—Ç—Ä –±–∞–ª–∞–Ω—Å–∞
    # - profile_topup_balance ‚Üí –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
    # - balance_history ‚Üí –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π  
    # - balance_analytics ‚Üí –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç—Ä–∞—Ç
```

**–ü–ï–†–ï–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `app/handlers/profile/balance_handler.py`

### ‚öôÔ∏è –≠—Ç–∞–ø 7: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (2-3 —á–∞—Å–∞) ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

#### 7.1 –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚úÖ
```python
# app/handlers/menu/settings_handler.py
class SettingsMenuHandler:  # ‚úÖ –°–û–ó–î–ê–ù
    async def show_settings_menu(self, call: CallbackQuery, state: FSMContext):
        """‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç profile —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª"""
        
    # –ü–ï–†–ï–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û –§–£–ù–ö–¶–ò–û–ù–ê–õ–ê:
    # - profile_menu ‚Üí –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
    # - settings_notifications ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    # - settings_language ‚Üí –Ø–∑—ã–∫ –∏ —Ä–µ–≥–∏–æ–Ω
    # - settings_interface ‚Üí –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    # - settings_privacy ‚Üí –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
    # - settings_payments ‚Üí –ü–ª–∞—Ç–µ–∂–∏
```

**–ü–ï–†–ï–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `app/handlers/profile/settings_handler.py`

### ‚ÑπÔ∏è –≠—Ç–∞–ø 8: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ–º–æ—â–∏ (1-2 —á–∞—Å–∞) ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

#### 8.1 –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø–æ–º–æ—â—å ‚úÖ
```python
# app/handlers/menu/help_handler.py
class HelpMenuHandler:  # ‚úÖ –°–û–ó–î–ê–ù
    async def show_help_menu(self, call: CallbackQuery, state: FSMContext):
        """‚ÑπÔ∏è –ü–æ–º–æ—â—å - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç profile —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª"""
        
    # –ü–ï–†–ï–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –°–£–©–ï–°–¢–í–£–Æ–©–ï–ì–û –§–£–ù–ö–¶–ò–û–ù–ê–õ–ê:
    # - profile_help ‚Üí –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    # - help_faq ‚Üí FAQ (–∑–∞–≥–ª—É—à–∫–∞)
    # - help_changelog ‚Üí –ß—Ç–æ –Ω–æ–≤–æ–≥–æ (–∑–∞–≥–ª—É—à–∫–∞)
    # + –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É
```

**–ü–ï–†–ï–ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï:** –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `app/handlers/profile/main_handler.py` (—Å–ø—Ä–∞–≤–∫–∞)

## üîÑ –≠—Ç–∞–ø 9: –ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (1 —á–∞—Å) ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

### 9.1 –£–±—Ä–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–ª–æ–π ‚úÖ
```python
# –£–î–ê–õ–ï–ù–û: app/handlers/menu/migration.py
# –£–î–ê–õ–ï–ù–û: tests/handlers/menu/test_migration.py
# –£–î–ê–õ–ï–ù–û: tests/handlers/menu/test_balance_handler.py
# –£–î–ê–õ–ï–ù–û: tests/integration/test_menu_navigation.py

# –ü—Ä–∏—á–∏–Ω–∞: –†–µ—à–µ–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ —Å—Ä–∞–∑—É –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ —Å–ª–æ—è
```

### 9.2 –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤–µ—Å—å LEGACY –∫–æ–¥ ‚úÖ
```python
# ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û: app/main.py
# - profile_router ‚Üí LEGACY: –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
# - gallery_main_router ‚Üí LEGACY: –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
# - gallery_filter_router ‚Üí LEGACY: –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω

# ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û: app/handlers/menu/router.py
# - migration_router ‚Üí –£–î–ê–õ–ï–ù
# - profile_router ‚Üí LEGACY: –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω

# ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û: app/keyboards/main.py
# - get_main_menu() ‚Üí LEGACY: –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
# - get_ai_creativity_menu() ‚Üí LEGACY: –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
# - get_images_menu() ‚Üí LEGACY: –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
# - get_my_projects_menu() ‚Üí LEGACY: –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω

# ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û: app/keyboards/menu/main.py
# - get_main_menu_legacy() ‚Üí LEGACY: –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
# - get_main_menu() —Ç–µ–ø–µ—Ä—å –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (–Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
```

### 9.3 –û–±–Ω–æ–≤–ª–µ–Ω—ã callback_data ‚úÖ
```python
# ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û: –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ –Ω–æ–≤—ã–µ callback_data
# - "images_menu" ‚Üí "creativity_menu"
# - "ai_creativity_menu" ‚Üí "creativity_menu"
# - "my_projects_menu" ‚Üí "projects_menu"

# ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û: –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–µ callback_data:
# - "creativity_menu" (–≤–º–µ—Å—Ç–æ "ai_creativity_menu")
# - "projects_menu" (–≤–º–µ—Å—Ç–æ "my_projects_menu")
# - "balance_menu_v2" (–Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª)
# - "settings_menu_v2" (–≤–º–µ—Å—Ç–æ "profile_menu")
# - "help_menu_v2" (–Ω–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª)
```

**–†–ï–ó–£–õ–¨–¢–ê–¢:** –ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–ª–æ—è. –í—Å–µ LEGACY –∫–æ–¥ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∏ –ø–æ–º–µ—á–µ–Ω –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è.

## üß™ –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Unit —Ç–µ—Å—Ç—ã:
```python
# tests/handlers/menu/
‚îú‚îÄ‚îÄ test_main_handler.py
‚îú‚îÄ‚îÄ test_creativity_handler.py
‚îú‚îÄ‚îÄ test_projects_handler.py
‚îú‚îÄ‚îÄ test_business_handler.py
‚îú‚îÄ‚îÄ test_balance_handler.py
‚îú‚îÄ‚îÄ test_settings_handler.py
‚îî‚îÄ‚îÄ test_help_handler.py
```

### Integration —Ç–µ—Å—Ç—ã:
```python
# tests/integration/
‚îú‚îÄ‚îÄ test_menu_navigation.py
‚îú‚îÄ‚îÄ test_legacy_compatibility.py
‚îî‚îÄ‚îÄ test_user_flow.py
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ:
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ ‚â• 80%
- ‚úÖ –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ ‚â§ 200ms
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ:
- ‚úÖ –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤ –¥–æ —Ü–µ–ª–∏ ‚â§ 3
- ‚úÖ –í—Ä–µ–º—è –ø–æ–∏—Å–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ ‚â§ 10 —Å–µ–∫
- ‚úÖ –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö —Å–µ—Å—Å–∏–π ‚â• 85%

## üóìÔ∏è –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏

| –≠—Ç–∞–ø | –í—Ä–µ–º—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-------|----------|
| 1 | 1-2 —á | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã |
| 2 | 2-3 —á | –ú–∏–≥—Ä–∞—Ü–∏—è –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é |
| 3 | 2-3 —á | –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ |
| 4 | 1-2 —á | –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ "–ú–æ–∏ —Ä–∞–±–æ—Ç—ã" |
| 5 | 2-3 —á | –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏–π |
| 6 | 1-2 —á | –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ –±–∞–ª–∞–Ω—Å–∞ |
| 7 | 2-3 —á | –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ |
| 8 | 1-2 —á | –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ–º–æ—â–∏ |
| 9 | 1 —á | –ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É |

**–û–±—â–µ–µ –≤—Ä–µ–º—è: 14-23 —á–∞—Å–∞**

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∑–∞–ø—É—Å–∫—É

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
1. ‚úÖ –í—Å–µ –Ω–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–∑–¥–∞–Ω—ã
2. ‚úÖ LEGACY –∫–æ–¥ –ø–æ–º–µ—á–µ–Ω –∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
3. ‚úÖ –¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
4. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
5. ‚úÖ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
6. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω

### Rollback –ø–ª–∞–Ω:
1. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ LEGACY –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
2. –û—Ç–∫–∞—Ç callback_data –º–∞–ø–ø–∏–Ω–≥–∞
3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä
4. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –æ–± –æ—Ç–∫–∞—Ç–µ

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–≤–æ–ª–∏—Ç:
- **–£–ª—É—á—à–∏—Ç—å UX** - –ª–æ–≥–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º
- **–£–ø—Ä–æ—Å—Ç–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É** - –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —á–∏—Å—Ç—ã–π –∫–æ–¥
- **–£—Å–∫–æ—Ä–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É** - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–ü–æ–≤—ã—Å–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–∫–∞—Ç–∞. 