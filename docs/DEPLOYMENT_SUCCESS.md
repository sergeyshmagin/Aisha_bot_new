# üéâ –£—Å–ø–µ—à–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Aisha Bot —Å–∏—Å—Ç–µ–º—ã

**–î–∞—Ç–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:** 11 –∏—é–Ω—è 2025  
**–í–µ—Ä—Å–∏—è:** 9db8d93-dirty  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–ï–®–ù–û

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### ü§ñ Telegram Bot
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä:** `aisha-bot-primary`
- **–†–µ–∂–∏–º:** Polling –∞–∫—Ç–∏–≤–µ–Ω
- **ID:** @KAZAI_Aisha_bot (8063965284)
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** DEBUG —É—Ä–æ–≤–µ–Ω—å

### ‚öôÔ∏è Background Worker
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç  
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä:** `aisha-worker-1`
- **–†–µ–∂–∏–º:** Background worker
- **–§—É–Ω–∫—Ü–∏–∏:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á –±–µ–∑ polling

### üåê Webhook API
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (2 —ç–∫–∑–µ–º–ø–ª—è—Ä–∞)
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:** webhook-api-1, webhook-api-2
- **–ü–æ—Ä—Ç—ã:** 8001, 8002
- **Health:** Healthy
- **Load Balancer:** Nginx (–ø–æ—Ä—Ç—ã 80, 443)

### üóÑÔ∏è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **PostgreSQL:** ‚úÖ 192.168.0.4:5432 - –ü–æ–¥–∫–ª—é—á–µ–Ω–æ
- **Redis:** ‚úÖ 192.168.0.3:6379 - –ü–æ–¥–∫–ª—é—á–µ–Ω–æ  
- **MinIO:** ‚úÖ 192.168.0.4:9000 - –ü–æ–¥–∫–ª—é—á–µ–Ω–æ
- **Docker Registry:** ‚úÖ 192.168.0.4:5000 - –†–∞–±–æ—Ç–∞–µ—Ç

## üöÄ –£–ª—É—á—à–µ–Ω–∏—è –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏

### üì¶ –î–µ–ø–ª–æ–π —Å–∏—Å—Ç–µ–º–∞ v2.0
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ Docker —Å–µ—Ç–∏ —Å –ø–æ–¥—Å–µ—Ç—å—é
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–ª–∞–≥–æ–≤ `--skip-test`, `--skip-build`, `--force-rebuild`
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –†–∞–∑–¥–µ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ Dockerfile

### üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `environs>=14.2.0`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π `aiohttp~=3.9.0` (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å aiogram)
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### üßπ –û—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã legacy —Ñ–∞–π–ª—ã (–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ 3GB+ –º–µ—Å—Ç–∞)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìã –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
CONTAINER ID   IMAGE                                   STATUS                          NAMES
a04033f32b22   192.168.0.4:5000/aisha/bot:latest      Up (healthy)                   aisha-bot-primary
f36eac1b8bdc   192.168.0.4:5000/aisha/bot:latest      Up (healthy)                   aisha-worker-1
820a86896774   192.168.0.4:5000/webhook-api:final     Up 3+ hours (healthy)          webhook-api-2
e2ef0ca0ea6c   192.168.0.4:5000/webhook-api:final     Up 3+ hours (healthy)          webhook-api-1
c4bd34e93fa2   192.168.0.4:5000/nginx-webhook:latest  Up 5+ hours (healthy)          aisha-nginx-webhook
```

## üîó –°–µ—Ç–µ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Docker Networks
- **aisha_bot_cluster:** 172.26.0.0/16
  - aisha-bot-primary: 172.26.0.10
  - aisha-worker-1: 172.26.0.20

### Webhook Endpoints
- `http://192.168.0.10:8001/webhook/fal/status` ‚úÖ
- `http://192.168.0.10:8001/webhook/fal/portrait` ‚úÖ
- `http://192.168.0.10:8002/webhook/fal/status` ‚úÖ
- `http://192.168.0.10:8002/webhook/fal/portrait` ‚úÖ

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
- –ó–∞–ø—É—Å–∫ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö
- Webhook API endpoints
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã health checks
- Load balancer nginx

### ‚ö†Ô∏è –ó–∞–º–µ—á–∞–Ω–∏—è
- FAL_KEY —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è FAL AI
- HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç –∏–Ω–æ–≥–¥–∞ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ aibots.kz:8443
- –ü—Ä—è–º–æ–µ HTTP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
ssh aisha@192.168.0.10 'cd /opt/aisha-backend && docker ps'

# –õ–æ–≥–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–æ—Ç–∞
ssh aisha@192.168.0.10 'cd /opt/aisha-backend && docker logs aisha-bot-primary --tail 50'

# –õ–æ–≥–∏ worker
ssh aisha@192.168.0.10 'cd /opt/aisha-backend && docker logs aisha-worker-1 --tail 20'

# –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π (—Å–ª–µ–¥—É—é—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
bash scripts/production/deploy-via-registry.sh --skip-test --skip-build
```

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**: –î–æ–±–∞–≤–∏—Ç—å Prometheus/Grafana
2. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Let's Encrypt –¥–ª—è HTTPS
3. **FAL AI –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è FAL_KEY –¥–ª—è production
4. **Backup —Å–∏—Å—Ç–µ–º–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –ë–î –∏ storage
5. **CI/CD**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏ push –≤ main

---

**üéØ –°–ò–°–¢–ï–ú–ê –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ó–í–ï–†–ù–£–¢–ê –ò –ì–û–¢–û–í–ê –ö –†–ê–ë–û–¢–ï!**

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 11 –∏—é–Ω—è 2025, 07:15 UTC* 