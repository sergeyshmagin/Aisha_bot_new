# –£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤

## üéØ –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞
–†–∞–Ω—å—à–µ —Ñ–∞–π–ª—ã > 20 –ú–ë **–æ—Ç–∫–ª–æ–Ω—è–ª–∏—Å—å** —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç.

### –†–µ—à–µ–Ω–∏–µ
–¢–µ–ø–µ—Ä—å –±–æ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—ã—Ç–∞–µ—Ç—Å—è** –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã, –∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã.

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –î–ª—è —Ñ–∞–π–ª–æ–≤ ‚â§ 20 –ú–ë
```
–ê—É–¥–∏–æ/Voice ‚Üí –°–∫–∞—á–∏–≤–∞–Ω–∏–µ ‚Üí Whisper ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç
```

### –î–ª—è —Ñ–∞–π–ª–æ–≤ > 20 –ú–ë
```
–ê—É–¥–∏–æ/Voice ‚Üí –ü–æ–ø—ã—Ç–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
    ‚Üì
–£—Å–ø–µ—Ö? ‚Üí Whisper ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç
    ‚Üì
–ù–µ—É–¥–∞—á–∞? ‚Üí –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç
```

### –î–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ª—é–±–æ–π —Ä–∞–∑–º–µ—Ä)
```
–î–æ–∫—É–º–µ–Ω—Ç (audio/*) ‚Üí –°–∫–∞—á–∏–≤–∞–Ω–∏–µ ‚Üí Whisper ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç
```

## üì± UX –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –§–∞–π–ª 15 –ú–ë
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞—É–¥–∏–æ 15 –ú–ë]
–ë–æ—Ç: üéµ –ù–∞—á–∏–Ω–∞—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∞—É–¥–∏–æ...
–ë–æ—Ç: [–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç]
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –§–∞–π–ª 30 –ú–ë (—É—Å–ø–µ—à–Ω–æ)
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞—É–¥–∏–æ 30 –ú–ë]
–ë–æ—Ç: üìÅ –ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª –æ–±–Ω–∞—Ä—É–∂–µ–Ω
     üìä –†–∞–∑–º–µ—Ä: 30.0 –ú–ë
     üîÑ –ü—ã—Ç–∞–µ–º—Å—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥...
–ë–æ—Ç: [–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç]
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –§–∞–π–ª 50 –ú–ë (–Ω–µ—É–¥–∞—á–∞)
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞—É–¥–∏–æ 50 –ú–ë]
–ë–æ—Ç: üìÅ –ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª –æ–±–Ω–∞—Ä—É–∂–µ–Ω
     üìä –†–∞–∑–º–µ—Ä: 50.0 –ú–ë
     üîÑ –ü—ã—Ç–∞–µ–º—Å—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥...
–ë–æ—Ç: üìÅ –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
     üí° –ü—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
     üéØ –û—Ç–ø—Ä–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –∂–µ —Ñ–∞–π–ª –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç!
     
     –ö–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å:
     1Ô∏è‚É£ –ù–∞–∂–º–∏—Ç–µ üìé (—Å–∫—Ä–µ–ø–∫–∞)
     2Ô∏è‚É£ –í—ã–±–µ—Ä–∏—Ç–µ '–§–∞–π–ª' –∏–ª–∏ '–î–æ–∫—É–º–µ–Ω—Ç'
     3Ô∏è‚É£ –ù–∞–π–¥–∏—Ç–µ —Ç–æ—Ç –∂–µ –∞—É–¥–∏–æ —Ñ–∞–π–ª
     4Ô∏è‚É£ –û—Ç–ø—Ä–∞–≤—å—Ç–µ - –±–æ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
     
     ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã –¥–æ 2 –ì–ë
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –î–æ–∫—É–º–µ–Ω—Ç 100 –ú–ë
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: [–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞—É–¥–∏–æ –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç 100 –ú–ë]
–ë–æ—Ç: üéµ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –∞—É–¥–∏–æ —Ñ–∞–π–ª
     üìÅ –§–∞–π–ª: audio_large.mp3
     üìä –†–∞–∑–º–µ—Ä: 100.0 –ú–ë
     üîÑ –°–∫–∞—á–∏–≤–∞—é –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É—é...
–ë–æ—Ç: üéµ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –∞—É–¥–∏–æ —Ñ–∞–π–ª
     üìÅ –§–∞–π–ª: audio_large.mp3
     üìä –†–∞–∑–º–µ—Ä: 100.0 –ú–ë
     ‚úÖ –°–∫–∞—á–∞–Ω: 100.0 –ú–ë
     ü§ñ –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É—é —á–µ—Ä–µ–∑ Whisper...
–ë–æ—Ç: [–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç]
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

#### 1. –ü–æ–ø—ã—Ç–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
```python
if file_size and file_size > telegram_api_limit:
    logger.info(f"[AUDIO_UNIVERSAL] –ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª ({file_size} –±–∞–π—Ç), –ø—ã—Ç–∞–µ–º—Å—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å")
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ
    await processing_msg.edit_text(
        f"üìÅ **–ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª –æ–±–Ω–∞—Ä—É–∂–µ–Ω**\n\n"
        f"üìä –†–∞–∑–º–µ—Ä: {file_size / (1024*1024):.1f} –ú–ë\n"
        f"üîÑ –ü—ã—Ç–∞–µ–º—Å—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥...",
        parse_mode="Markdown"
    )
    
    # –ü—ã—Ç–∞–µ–º—Å—è —Å–∫–∞—á–∞—Ç—å
    try:
        file = await message.bot.get_file(file_id)
        downloaded_file = await message.bot.download_file(file.file_path)
        logger.info(f"[AUDIO_UNIVERSAL] –ë–æ–ª—å—à–æ–π —Ñ–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Å–∫–∞—á–∞–Ω")
        
    except Exception as download_error:
        # –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç
        await message.reply("üìÅ –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç...")
        return
```

#### 2. –£–ª—É—á—à–µ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```python
# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
processing_msg = await message.answer(
    f"üéµ **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –∞—É–¥–∏–æ —Ñ–∞–π–ª**\n\n"
    f"üìÅ –§–∞–π–ª: {file_name}\n"
    f"üìä –†–∞–∑–º–µ—Ä: {file_size / (1024*1024):.1f} –ú–ë\n"
    f"üîÑ –°–∫–∞—á–∏–≤–∞—é –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É—é...",
    parse_mode="Markdown"
)

# –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ—Å–ª–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
await processing_msg.edit_text(
    f"üéµ **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –∞—É–¥–∏–æ —Ñ–∞–π–ª**\n\n"
    f"üìÅ –§–∞–π–ª: {file_name}\n"
    f"üìä –†–∞–∑–º–µ—Ä: {file_size / (1024*1024):.1f} –ú–ë\n"
    f"‚úÖ –°–∫–∞—á–∞–Ω: {len(audio_data) / (1024*1024):.1f} –ú–ë\n"
    f"ü§ñ –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É—é —á–µ—Ä–µ–∑ Whisper...",
    parse_mode="Markdown"
)
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### ‚úÖ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –Ω–µ –Ω—É–∂–Ω–æ –¥—É–º–∞—Ç—å –æ —Ä–∞–∑–º–µ—Ä–µ
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤–∏–¥—è—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–ü—Ä–æ—Å—Ç—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** - –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ 2 –ì–ë** - —á–µ—Ä–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### ‚úÖ –î–ª—è —Å–∏—Å—Ç–µ–º—ã
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Telegram API
- **Graceful degradation** - –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º
- **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ –≤—Å–µ–º–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç:**
1. –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ª—é–±—ã–µ –∞—É–¥–∏–æ —Ñ–∞–π–ª—ã –±–µ–∑ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π –æ —Ä–∞–∑–º–µ—Ä–µ
2. –ü–æ–ª—É—á–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤
3. –õ–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
4. –í–∏–¥–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–ª–∞:**
- –ë–æ–ª–µ–µ user-friendly
- –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–π
- –ë–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–π
- –ë–æ–ª–µ–µ –≥–∏–±–∫–æ–π

## üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç–µ—Å—Ç—ã
1. **–§–∞–π–ª 10 –ú–ë** - –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **–§–∞–π–ª 25 –ú–ë** - –ø–æ–ø—ã—Ç–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏, –≤–æ–∑–º–æ–∂–µ–Ω —É—Å–ø–µ—Ö
3. **–§–∞–π–ª 60 –ú–ë** - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç
4. **–î–æ–∫—É–º–µ–Ω—Ç 100 –ú–ë** - —É—Å–ø–µ—à–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
5. **–î–æ–∫—É–º–µ–Ω—Ç 500 –ú–ë** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫ –Ω–∞ 30-50%
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã 