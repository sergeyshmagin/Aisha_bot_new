# üöÄ –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!

*–î–∞—Ç–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏: 31 –º–∞—è 2025, 22:38*

## ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è

### üîß **–û—Ç–∫–ª—é—á–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º**
- **–ë—ã–ª–æ**: `self.test_mode = True  # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–µ–Ω`
- **–°—Ç–∞–ª–æ**: `self.test_mode = settings.AVATAR_TEST_MODE  # –ò–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏`

### üöÄ **–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω FAL AI –ø—Ä–æ–¥–∞–∫—à–Ω**
- **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º**: ‚ùå –û—Ç–∫–ª—é—á–µ–Ω
- **FAL AI API**: ‚úÖ –ê–∫—Ç–∏–≤–µ–Ω —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏
- **–°–∏–º—É–ª—è—Ü–∏—è**: ‚ùå –í—ã–∫–ª—é—á–µ–Ω–∞

## üéØ –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### üìã **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
```python
# app/core/config.py
AVATAR_TEST_MODE: bool = Field(False, env="AVATAR_TEST_MODE")  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–¥–∞–∫—à–Ω
```

### üîë **FAL AI –∫–ª—é—á–∏**
- **FAL_API_KEY**: ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω
- **–ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: ‚úÖ –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–∞

## üñºÔ∏è –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### ‚ùå **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–≤—ã–∫–ª—é—á–µ–Ω)**
```
üß™ [FAL TEST MODE] –°–∏–º—É–ª—è—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞...
üß™ [FAL TEST MODE] –°–∏–º—É–ª—è—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: https://picsum.photos/...
```

### ‚úÖ **–ü—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º (–∞–∫—Ç–∏–≤–µ–Ω)**
```
üöÄ FAL API –∫–ª—é—á —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: fal_2Nq8xNb...
[FAL AI] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å LoRA –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∞...
[FAL AI] LoRA –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: https://fal.media/files/...
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–∞

### 1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –∑–∞–ø—É—Å–∫–∞**
–ò—â–µ–º –≤ –ª–æ–≥–∞—Ö:
```
‚úÖ üöÄ FAL API –∫–ª—é—á —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: fal_2Nq8xNb...
‚ùå üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–∫–ª—é—á–µ–Ω...
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**
```bash
# –í Telegram –±–æ—Ç–µ:
/generate
# –í–≤–æ–¥–∏–º –ø—Ä–æ–º–ø—Ç
# –û–∂–∏–¥–∞–µ–º —Ä–µ–∞–ª—å–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å fal.media URL
```

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
- **–¢–µ—Å—Ç–æ–≤—ã–π**: `https://picsum.photos/1024/1024?random=...`
- **–ü—Ä–æ–¥–∞–∫—à–Ω**: `https://fal.media/files/...` –∏–ª–∏ `https://fal.media/...`

## üîÑ –û—Ç–∫–∞—Ç –≤ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

### –í—Ä–µ–º–µ–Ω–Ω—ã–π –æ—Ç–∫–∞—Ç (–≤ –∫–æ–¥–µ)
```python
# app/services/fal/generation_service.py
self.test_mode = True  # –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
```

### –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –æ—Ç–∫–∞—Ç (—á–µ—Ä–µ–∑ .env)
```bash
# .env
AVATAR_TEST_MODE=true
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–∞

### üîç **–ß—Ç–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å**
1. **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**: —Ä–µ–∞–ª—å–Ω—ã–µ URL –æ—Ç FAL AI
2. **–í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**: –æ–±—ã—á–Ω–æ 20-60 —Å–µ–∫—É–Ω–¥
3. **–û—à–∏–±–∫–∏ API**: –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–ª—é—á–∞–º–∏ –∏–ª–∏ –ª–∏–º–∏—Ç–∞–º–∏
4. **–†–∞—Å—Ö–æ–¥ –∫—Ä–µ–¥–∏—Ç–æ–≤**: —É—á–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è FAL AI

### üö® **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–æ–±–ª–µ–º**
- –í–æ–∑–≤—Ä–∞—Ç –∫ —Å–∏–º—É–ª—è—Ü–∏–∏ –≤ –ª–æ–≥–∞—Ö
- –û—à–∏–±–∫–∏ `MissingCredentialsError` 
- –¢–∞–π–º–∞—É—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- URL –≤–∏–¥–∞ `picsum.photos` –≤–º–µ—Å—Ç–æ `fal.media`

## üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### ‚úÖ **–ì–æ—Ç–æ–≤–æ**
- –†–µ–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- –ü–æ—Ä—Ç—Ä–µ—Ç–Ω—ã–µ –∏ —Å—Ç–∏–ª–µ–≤—ã–µ –∞–≤–∞—Ç–∞—Ä—ã
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FAL AI

### üîß **–ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
- `/debug_avatars` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∞–≤–∞—Ç–∞—Ä–æ–≤
- `/generate` - —Ä–µ–∞–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å FAL AI
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–æ–æ–±—â–µ–Ω–∏–π

---
**–°—Ç–∞—Ç—É—Å**: üü¢ **–ü–†–û–î–ê–ö–®–ù –†–ï–ñ–ò–ú –ê–ö–¢–ò–í–ï–ù**  
**–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º**: ‚ùå **–û–¢–ö–õ–Æ–ß–ï–ù**  
**FAL AI**: ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢** 