# üé§ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã —É—Å–ø–µ—à–Ω–æ!

### üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- **ffmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** –≤ Docker –æ–±—Ä–∞–∑
- **–ü—É—Ç—å storage –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** —Å `/opt/aisha-backend` –Ω–∞ `/app/storage/temp`
- **Polling –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã** - —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç –¥–µ–ª–∞–µ—Ç polling
- **Standby –±–æ—Ç –≤ —Ä–µ–∂–∏–º–µ –æ–∂–∏–¥–∞–Ω–∏—è** - –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é:

### 1. üé§ –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
- –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ `@KAZAI_Aisha_bot`
- –ó–∞–ø–∏—à–∏—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ—Ä–æ—Ç–∫–æ–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–¥–æ 30 —Å–µ–∫)

### 2. üìù –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```bash
# –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∞—É–¥–∏–æ
ssh aisha@192.168.0.10 'docker logs aisha-bot-polling-1 --follow | grep -E "(audio|transcript|ffmpeg)"'
```

### 3. üîç –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
./scripts/utils/debug-transcription.sh

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh aisha@192.168.0.10 '/tmp/quick-debug.sh'
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

### ‚úÖ –£—Å–ø–µ—à–Ω–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è:
```
[AUDIO_UNIVERSAL] –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –∞—É–¥–∏–æ
[AudioService] –ù–∞—á–∞–ª–æ process_audio (ffmpeg pipeline)
[AudioService] –†–∞–∑–º–µ—Ä –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: XXXX –±–∞–π—Ç
[AudioService] –û–ø—Ä–µ–¥–µ–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç: M4A/MP4
[AudioService] –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ mp3 —á–µ—Ä–µ–∑ ffmpeg
[AudioService] mp3-—Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω
[AudioService] –ù–∞—Ä–µ–∑–∫–∞ –Ω–∞ —á–∞–Ω–∫–∏ —á–µ—Ä–µ–∑ ffmpeg
[AudioService] –ü–æ–ª—É—á–µ–Ω–æ —á–∞–Ω–∫–æ–≤: X
[AudioService] –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è —á–∞–Ω–∫–∞ 1/X
[AudioService] –ò—Ç–æ–≥–æ–≤–∞—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è: success=true
```

### ‚ùå –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:
- **Permission denied** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- **ffprobe –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  
- **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã polling** - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã

## üö® –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
```bash
# ffmpeg
ssh aisha@192.168.0.10 'docker exec aisha-bot-polling-1 which ffmpeg'

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
ssh aisha@192.168.0.10 'docker exec aisha-bot-polling-1 ls -la /app/storage/'

# –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã
ssh aisha@192.168.0.10 'docker logs aisha-bot-polling-1 --since 5m | grep -i conflict'
```

### –°—Ç–∞—Ç—É—Å –±–æ—Ç–æ–≤:
```bash
ssh aisha@192.168.0.10 'docker ps --filter "name=aisha-bot"'
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:
```bash
ssh aisha@192.168.0.10 '
handled=$(docker logs aisha-bot-polling-1 --since 10m | grep -c "is handled" || echo 0)
errors=$(docker logs aisha-bot-polling-1 --since 10m | grep -c "ERROR" || echo 0)
audio=$(docker logs aisha-bot-polling-1 --since 10m | grep -c "audio.*processing" || echo 0)

echo "–ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∏–Ω—É—Ç:"
echo "  ‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: $handled"
echo "  ‚Ä¢ –û—à–∏–±–æ–∫: $errors"  
echo "  ‚Ä¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–¥–∏–æ: $audio"
'
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é** –≥–æ–ª–æ—Å–æ–≤—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ** —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ staging –æ–∫—Ä—É–∂–µ–Ω–∏–µ** –¥–ª—è –±—É–¥—É—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

- `./scripts/utils/debug-transcription.sh` - –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- `./scripts/production/fix-standby-bot.sh` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ standby –±–æ—Ç–æ–º  
- `./scripts/monitoring/monitor-production.sh` - –æ–±—â–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- `ssh aisha@192.168.0.10 '/tmp/quick-debug.sh'` - –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

---

**üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! 