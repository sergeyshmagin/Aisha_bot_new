# üîß –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ WEBHOOK FAL AI

**–î–∞—Ç–∞:** 2025-01-27  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ê–≤–∞—Ç–∞—Ä —É—Å–ø–µ—à–Ω–æ –æ–±—É—á–∏–ª—Å—è, –Ω–æ webhook –Ω–µ –ø—Ä–∏—à–µ–ª –Ω–∞ API  
**–°—Ç–∞—Ç—É—Å:** üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

## üìä –ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–µ–≥–æ API endpoint
```bash
# –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
‚ùå 404, message='Attempt to decode JSON with unexpected mimetype: application/octet-stream'
URL: https://aibots.kz:8443/api/v1/avatar/test_webhook
```

**–ü—Ä–∏—á–∏–Ω–∞:** Nginx –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ API —Å–µ—Ä–≤–µ—Ä—É

### 2. ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ë–æ—Ç –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ `AVATAR_TEST_MODE=true`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ webhook'–∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ FAL AI

### 3. üîß –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API —Å–µ—Ä–≤–µ—Ä–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** API —Å–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –∑–∞–≥–ª—É—à–∫–∏ –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–π –ë–î

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. üîó –ò—Å–ø—Ä–∞–≤–ª–µ–Ω API —Ä–æ—É—Ç–µ—Ä webhook'–∞
**–§–∞–π–ª:** `api_server/app/routers/fal_webhook.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω–æ–π –ë–î –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (`AvatarTrainingService`, `UserService`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á

### 2. üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü–µ—Ä–µ–¥–∞—á–∞ webhook_url –≤ FAL AI
**–§–∞–π–ª:** `app/services/avatar/fal_training_service.py`

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –º–µ—Ç–æ–¥–µ `_train_general_model` webhook_url –¥–æ–±–∞–≤–ª—è–ª—Å—è –≤ config, –Ω–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ `fal_client.submit()`, –∏–∑-–∑–∞ —á–µ–≥–æ –≤ FAL AI input –±—ã–ª `null`.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```python
# –ë—ã–ª–æ (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
result = await self.fal_client.submit(
    "fal-ai/flux-pro-trainer",
    arguments=config  # webhook_url —Ç–µ—Ä—è–ª—Å—è!
)

# –°—Ç–∞–ª–æ (–ü–†–ê–í–ò–õ–¨–ù–û):
result = await self.fal_client.submit(
    "fal-ai/flux-pro-trainer", 
    arguments=config,
    webhook_url=webhook_url  # ‚úÖ –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ!
)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä—å FAL AI –ø–æ–ª—É—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π webhook_url –∏ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–±—É—á–µ–Ω–∏—è.

### 3. üß™ –ù–ê–°–¢–†–û–ô–ö–ê –ë–´–°–¢–†–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
**–§–∞–π–ª—ã:** `app/core/config.py`, `test_training_settings.py`, `restore_training_config.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏—è (1 —à–∞–≥/–∏—Ç–µ—Ä–∞—Ü–∏—è)
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (`test_training_settings.py`)
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (`restore_training_config.py`)

**–í—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```python
FAL_PORTRAIT_STEPS = 1          # –±—ã–ª–æ: 1000
FAL_PRO_ITERATIONS = 1          # –±—ã–ª–æ: 500
FAL_PRESET_BALANCED = {
    "portrait": {"steps": 1},    # –±—ã–ª–æ: 1000
    "general": {"iterations": 1} # –±—ã–ª–æ: 500
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±—É—á–µ–Ω–∏–µ –∑–∞–π–º–µ—Ç 1-2 –º–∏–Ω—É—Ç—ã –≤–º–µ—Å—Ç–æ 15-30 –º–∏–Ω—É—Ç, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –±—ã—Å—Ç—Ä–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å webhook.

```python
# –ë—ã–ª–æ (–∑–∞–≥–ª—É—à–∫–∞)
async def get_db_session():
    return None

# –°—Ç–∞–ª–æ (—Ä–µ–∞–ª—å–Ω–∞—è –ë–î)
async def get_db_session() -> AsyncSession:
    async for session in get_async_session():
        return session
```

### 4. üß™ –°–æ–∑–¥–∞–Ω—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã

#### `test_webhook_config.py` - –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
python test_webhook_config.py
```

#### `test_training_settings.py` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ–±—É—á–µ–Ω–∏—è
```bash
python test_training_settings.py
```

#### `restore_training_config.py` - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
```bash
python restore_training_config.py
```

#### `test_local_webhook.py` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ API
```bash
python test_local_webhook.py
```

#### `check_training_requests.py` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—É—á–µ–Ω–∏–π
```bash
python check_training_requests.py
```

#### `check_webhook_url.py` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```bash
python check_webhook_url.py
```

#### `test_webhook_simulation.py` - –°–∏–º—É–ª—è—Ü–∏—è webhook'–∞
```bash
python test_webhook_simulation.py
```

### 5. üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∫–æ–¥–∞
- ‚úÖ **–ö–†–ò–¢–ò–ß–ù–û:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ webhook_url –≤ FAL AI (input –±–æ–ª—å—à–µ –Ω–µ null)
- ‚úÖ **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:** –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—É—á–µ–Ω–∏—è (1 —à–∞–≥/–∏—Ç–µ—Ä–∞—Ü–∏—è)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π –∏–º–ø–æ—Ä—Ç `uuid` –≤ `app/core/redis.py`
- ‚úÖ –£–¥–∞–ª–µ–Ω legacy —Ñ–∞–π–ª `app/shared/utils/backend.py.LEGACY`
- ‚úÖ –û—á–∏—â–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤ `app/api_server.py` –∏ `app/main.py`

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–´

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
cd /opt/aisha-backend
python test_webhook_config.py
python test_training_settings.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–µ
‚úÖ FAL_API_KEY —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
üîó WEBHOOK URL: https://aibots.kz:8443/api/v1/avatar/status_update
‚úÖ –ì–û–¢–û–í–û –ö –ë–´–°–¢–†–û–ú–£ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ!
   –û–±—É—á–µ–Ω–∏–µ –∑–∞–π–º–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
   Webhook –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–π—Ç–∏ —á–µ—Ä–µ–∑ 1-2 –º–∏–Ω—É—Ç—ã
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π API
```bash
python test_local_webhook.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –°—Ç–∞—Ç—É—Å: 200
üì¶ –î–∞–Ω–Ω—ã–µ: {"status": "ok", "message": "Webhook API —Ä–∞–±–æ—Ç–∞–µ—Ç"}
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±—É—á–µ–Ω–∏—è
```bash
python check_training_requests.py
```

### –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ webhook
```bash
python test_webhook_simulation.py
# –í–≤–µ–¥–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π request_id –∏–∑ —à–∞–≥–∞ 3
```

## üö® –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´ –ü–†–û–ë–õ–ï–ú–´

### 1. üî¥ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
echo $AVATAR_TEST_MODE

# –ï—Å–ª–∏ true - –æ—Ç–∫–ª—é—á–∏—Ç–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
export AVATAR_TEST_MODE=false
# –ò–ª–∏ –≤ .env —Ñ–∞–π–ª–µ: AVATAR_TEST_MODE=false
```

### 2. üî¥ Nginx –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç API
**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–ø—Ä–æ—Å—ã –∫ `https://aibots.kz:8443/api/v1/avatar/*` –Ω–µ –¥–æ—Ö–æ–¥—è—Ç –¥–æ API —Å–µ—Ä–≤–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx:
```nginx
location /api/v1/avatar/ {
    proxy_pass http://localhost:8000/api/v1/avatar/;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
}
```

### 3. üî¥ API —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo systemctl status aisha-api.service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
sudo systemctl restart aisha-api.service
```

### 4. üî¥ FAL AI –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook'–∏
**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π webhook_url –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –æ–±—É—á–µ–Ω–∏—è
- FAL AI –Ω–µ –º–æ–∂–µ—Ç –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è –¥–æ –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- –û–±—É—á–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –±–µ–∑ webhook_url

## üéØ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:
1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É:** `python check_webhook_url.py`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `AVATAR_TEST_MODE=false`
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π API:** `python test_local_webhook.py`

### –ï—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π API —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø:** `curl https://aibots.kz:8443/api/v1/avatar/test_webhook`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Nginx:** `sudo tail -f /var/log/nginx/error.log`

### –ï—Å–ª–∏ –≤–Ω–µ—à–Ω–∏–π API —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ù–∞–π–¥–∏—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±—É—á–µ–Ω–∏—è:** `python check_training_requests.py`
2. **–°–∏–º—É–ª–∏—Ä—É–π—Ç–µ webhook:** `python test_webhook_simulation.py`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ API:** `sudo journalctl -u aisha-api.service -f`

## üì± –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã:
1. ‚úÖ Webhook'–∏ –æ—Ç FAL AI –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –Ω–∞ API —Å–µ—Ä–≤–µ—Ä
2. ‚úÖ API —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Ö —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω—É—é –ë–î
3. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∞–≤–∞—Ç–∞—Ä–∞
4. ‚úÖ –°—Ç–∞—Ç—É—Å –∞–≤–∞—Ç–∞—Ä–∞ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –Ω–∞ "COMPLETED"

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –ù–ê–°–¢–†–û–ï–ö

**–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è webhook –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

```bash
python restore_training_config.py
```

**–ò–Ω–∞—á–µ –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –æ–±—É—á–µ–Ω–∏—è –±—É–¥—É—Ç –Ω–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ (1 —à–∞–≥ –≤–º–µ—Å—Ç–æ 1000)!**

## üîß –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
```bash
# API —Å–µ—Ä–≤–µ—Ä
sudo journalctl -u aisha-api.service -f

# –û—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
sudo journalctl -u aisha-bot.service -f

# Nginx
sudo tail -f /var/log/nginx/access.log | grep avatar
```

### –ö–ª—é—á–µ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
```
[WEBHOOK] –ü–æ–ª—É—á–µ–Ω webhook –æ—Ç FAL AI
[WEBHOOK BACKGROUND] Webhook –æ–±—Ä–∞–±–æ—Ç–∞–Ω —É—Å–ø–µ—à–Ω–æ
[NOTIFICATION] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

---
**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–°–ª–µ–¥—É—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:** –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π 